<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Crate Mini-Game</title>
<style>
  body {
    background: #0e0e0e;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    padding-top: 60px;
  }

  .container {
    width: 420px;
    margin: auto;
  }

  .bar-bg {
    width: 100%;
    height: 24px;
    background: #2b2b2b;
    border-radius: 6px;
    overflow: hidden;
    margin: 20px 0;
  }

  .bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #00ff99, #00cc66);
    transition: width 0.15s;
  }

  .key {
    font-size: 48px;
    margin-top: 20px;
  }

  .hint {
    opacity: 0.7;
    font-size: 14px;
    margin-top: 10px;
  }

  .wrong {
    color: #ff5555;
  }

  .right {
    color: #00ff99;
  }
</style>
</head>
<body>

<div class="container">
  <h2>ðŸ“¦ Commercial Crate</h2>

  <div class="bar-bg">
    <div class="bar" id="bar"></div>
  </div>

  <div class="key" id="key">Press a key to begin</div>
  <div class="hint">W A S D & Arrow Keys</div>
</div>

<script>
const inputs = [
  { key: "w", label: "W" },
  { key: "a", label: "A" },
  { key: "s", label: "S" },
  { key: "d", label: "D" },
  { key: "ArrowUp", label: "â†‘" },
  { key: "ArrowDown", label: "â†“" },
  { key: "ArrowLeft", label: "â†" },
  { key: "ArrowRight", label: "â†’" }
];

let progress = 0;
let currentInput = null;

const bar = document.getElementById("bar");
const keyDisplay = document.getElementById("key");

function nextKey() {
  currentInput = inputs[Math.floor(Math.random() * inputs.length)];
  keyDisplay.textContent = currentInput.label;
  keyDisplay.className = "key";
}

document.addEventListener("keydown", (e) => {
  if (!currentInput) {
    nextKey();
    return;
  }

  if (e.key === currentInput.key) {
    progress += 4;          // correct = slow steady gain
    keyDisplay.classList.add("right");
  } else {
    progress -= 6;          // mistake = hurts more
    keyDisplay.classList.add("wrong");
  }

  progress = Math.max(0, Math.min(100, progress));
  bar.style.width = progress + "%";

  if (progress >= 100) {
    keyDisplay.textContent = "CRATE OPENED";
    document.removeEventListener("keydown", arguments.callee);
    return;
  }

  nextKey();
});
</script>

</body>
</html>
