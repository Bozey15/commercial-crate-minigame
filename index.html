<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HighLife Crate Mini-Game</title>
<style>
  body {
    background: #111;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    padding-top: 60px;
  }

  .container {
    width: 450px;
    margin: auto;
    border: 2px solid #00ff99;
    border-radius: 12px;
    padding: 20px;
    background: #1a1a1a;
    box-shadow: 0 0 15px #00ff99;
  }

  h2 { color: #00ff99; }

  .bar-bg {
    width: 100%;
    height: 28px;
    background: #222;
    border-radius: 6px;
    overflow: hidden;
    margin: 20px 0;
    box-shadow: inset 0 0 5px #000;
  }

  .bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #00ff99, #00cc66);
    transition: width 0.2s, background 0.2s;
  }

  .key { font-size: 48px; margin-top: 20px; transition: color 0.2s; }
  .hint { font-size: 14px; opacity: 0.7; margin-top: 10px; }
  .message { font-size: 18px; margin-top: 15px; color: #ff5555; transition: color 0.2s; }

  .restart-btn {
    margin-top: 30px;
    padding: 12px 25px;
    font-size: 18px;
    background: #222;
    color: #00ff99;
    border: 1px solid #00ff99;
    border-radius: 8px;
    cursor: pointer;
  }

  .restart-btn:hover { background: #00ff99; color: #111; }
</style>
</head>
<body>

<div class="container">
  <h2>üì¶ Commercial Crate</h2>
  <div class="bar-bg">
    <div class="bar" id="bar"></div>
  </div>
  <div class="key" id="key">Press any key to start</div>
  <div class="hint">W A S D & Arrow Keys</div>
  <div class="message" id="message"></div>
  <button class="restart-btn" id="restart">Restart</button>
</div>

<script>
const simpleKeys = [{ key: "a", label: "A" }, { key: "d", label: "D" }];
const hardKeys = [
  { key: "w", label: "W" }, { key: "s", label: "S" },
  { key: "ArrowUp", label: "‚Üë" }, { key: "ArrowDown", label: "‚Üì" },
  { key: "ArrowLeft", label: "‚Üê" }, { key: "ArrowRight", label: "‚Üí" }
];

let sequence = [], index = 0, progress = 0;

const bar = document.getElementById("bar");
const keyDisplay = document.getElementById("key");
const message = document.getElementById("message");
const restartBtn = document.getElementById("restart");

// Generate patterned sequence
function generateSequence() {
  sequence = [];
  for (let i = 0; i < 10; i++) sequence.push(simpleKeys[i % 2]);
  sequence.push(hardKeys[0], hardKeys[1], hardKeys[2]); // add harder keys
  index = 0;
  progress = 0;
  bar.style.width = "0%";
  bar.style.background = "linear-gradient(90deg, #00ff99, #00cc66)";
  message.textContent = "";
  keyDisplay.style.color = "#fff";
  displayKey();
}

// Display current key
function displayKey() {
  if (index < sequence.length) {
    keyDisplay.textContent = sequence[index].label;
  } else {
    keyDisplay.textContent = "‚úÖ CRATE OPENED";
    bar.style.width = "100%";
  }
}

// Flash bar color
function flashBar(color) {
  bar.style.background = color;
  setTimeout(() => { bar.style.background = "linear-gradient(90deg, #00ff99, #00cc66)"; }, 200);
}

// Flash key display
function flashKey(color) {
  keyDisplay.style.color = color;
  setTimeout(() => { keyDisplay.style.color = "#fff"; }, 200);
}

// Handle key press
document.addEventListener("keydown", (e) => {
  if (index >= sequence.length) return;
  const current = sequence[index];

  if (e.key === current.key) {
    progress += 5;
    bar.style.width = Math.min(progress, 100) + "%";
    flashKey("#00ff99");
    index++;
    displayKey();
  } else {
    progress -= 6;
    if (progress < 0) progress = 0;
    bar.style.width = progress + "%";
    message.textContent = "‚ùå Mistake!";
    flashBar("#ff5555");
    flashKey("#ff5555");
    setTimeout(() => { message.textContent = ""; }, 800);

    if (Math.random() < 0.15) {
      message.textContent = "üöì Police Alert!";
      flashBar("#ffff00");
      setTimeout(() => { message.textContent = ""; }, 1000);
    }
  }
});

// Restart button
restartBtn.addEventListener("click", generateSequence);
</script>

</body>
</html>


